# Production environment template for Nocturnal Archive platform
# Copy to `.env.production` or provision these as managed secrets in your deployment platform.

# -----------------------------------------------------------------------------
# Application identity & runtime
# -----------------------------------------------------------------------------
ENV=production
ENVIRONMENT=production
LOG_LEVEL=INFO
DEBUG=0
BUILD_ID=production-release

# -----------------------------------------------------------------------------
# Core security credentials (ROTATE before deployment)
# -----------------------------------------------------------------------------
JWT_SECRET_KEY=change-me-in-production
ADMIN_KEY=generate-a-random-admin-key

# -----------------------------------------------------------------------------
# Primary AI/LLM providers
# -----------------------------------------------------------------------------
GROQ_API_KEY=
GROQ_API_KEY_1=
GROQ_API_KEY_2=
GROQ_API_KEY_3=
OPENAI_API_KEY=
OPENAI_API_KEYS=[]              # JSON array when using multiple keys
ANTHROPIC_API_KEY=
MISTRAL_API_KEY=
MISTRAL_API_KEYS=[]              # JSON array for rotation
COHERE_API_KEY=
CEREBRAS_API_KEY=
OPENALEX_API_KEY=
OPENALEX_EMAIL=alerts@yourdomain.com
SEMANTIC_SCHOLAR_API_KEY=
CORE_API_KEY=
FRED_API_KEY=

# -----------------------------------------------------------------------------
# Search integrations & external data sources
# -----------------------------------------------------------------------------
GOOGLE_SEARCH_API_KEY=
GOOGLE_SEARCH_ENGINE_ID=
UNPAYWALL_EMAIL=library-team@yourdomain.com

# -----------------------------------------------------------------------------
# Persistence layers & caching
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql+psycopg2://postgres:postgres@db:5432/finsight
DB_URL=${DATABASE_URL}           # RAG indexer defaults to DATABASE_URL value
REDIS_URL=redis://cache:6379/0
MONGODB_URL=mongodb://mongo:27017/nocturnal_archive

# -----------------------------------------------------------------------------
# RAG (Retrieval Augmented Generation) configuration
# -----------------------------------------------------------------------------
ENABLE_RAG=false                  # Set to true once pgvector is provisioned
RAG_EMBED_MODEL=sentence-transformers/all-MiniLM-L6-v2
RAG_TOP_K=5

# -----------------------------------------------------------------------------
# FinSight & analytics configuration
# -----------------------------------------------------------------------------
FINSIGHT_STRICT=1                # 1 = production mode, 0 = allow mocks
RATE_LIMIT_REQUESTS_PER_HOUR=100
RATE_LIMIT_BURST_LIMIT=10
API_BASE_URL=https://api.yourdomain.com
DEMO_API_KEY=demo-key-change-me

# -----------------------------------------------------------------------------
# Monitoring & observability
# -----------------------------------------------------------------------------
SENTRY_DSN=

# -----------------------------------------------------------------------------
# Optional FinGPT configuration
# -----------------------------------------------------------------------------
FINGPT_BASE_MODEL=meta-llama/Llama-3.1-8B-Instruct
FINGPT_LORA_ID=FinGPT/fingpt-mt_llama2-7b_lora
FINGPT_LOAD_4BIT=true
HF_TOKEN=
NLP_MAX_NEW_TOKENS=128
NLP_TEMPERATURE=0.2
NLP_CACHE_TTL=900

# -----------------------------------------------------------------------------
# CORS / frontend integration
# -----------------------------------------------------------------------------
ALLOWED_ORIGINS=["https://app.yourdomain.com"]

# -----------------------------------------------------------------------------
# Diagnostics & feature toggles
# -----------------------------------------------------------------------------
DEGRADED=false                    # Allows partial startup in degraded mode
FINSIGHT_URL=https://api.yourdomain.com
ARCHIVE_URL=https://api.yourdomain.com
